---
import QuoteIcon from '../../icons/quoteIcon.png'

import heroTestimonial from '../../images/heroTestimonial.png'
import testimonial1 from '../../img/testimonial1.png'
import testimonial2 from '../../img/testimonial2.png'
import Button from '../system/Button.astro';
import Constrain from '../system/Constrain.astro';
import Text from '../system/Text.astro';
import { Image } from 'astro:assets';
import play from '../../images/ourmission/Play-Circle.svg'
import YoutubeEmbed from './../YoutubeEmbed.astro';

import TestimonicalCard from './TestimonialCard.astro';
import testimonialImg1 from '../../images/testimonial/testimonial1.jpg'



//Tapasana Das, Parent of Rudraansh Mohanty, Gr-2

const testimonials = [
    {
      image: testimonial1,
      quote: "Due to our job-related shifting, TCIS happens to be my daughter’s 4th school but the best one. Their teachers are exceptional and activities are very meaningful spanning from literature to STEM to IT to sports to theatre. Their approach to education is very different from other schools. I could see visible changes in my daughter; both her confidence and academic performance have significantly improved.",
      author: 'Smitha CP',
      role: 'Parent of Minakshi, Grade 10'
    },
    {
      image: testimonial2,
      quote: "TCIS academic program is thoughtfully designed. Also, integrated projects, expert teaching of sports, music, dance, art, etc has made a good learning experience. My son’s results in the board exam have been excellent and I would credit the experienced teachers at TCIS for their guidance.",
      author: 'Sandhya Iyyattil',
      role: 'Parent of Uday Shankar, Grade-12'
    },
    
  ]

---
<div class='bg-white p-14 pt-24 max-md:pt-2 px-20 max-md:px-4 max-md:p-10 max-md:pb-0'>
  <Constrain class="relative flex flex-col items-center max-md:items-center max-md:text-center">

    <!-- <Text type={'subtitle'} class='text-black text-center w-full max-md:hidden' style={{ letterSpacing: '0.1em', opacity: 0.6 }}>Hear From Our Community</Text>
    <Text type={'h2'} class='text-black mt-3 relative max-md:hidden'>
      See why <span class='text-accent2'>Glentree</span> is trusted
      <div class='w-[84px] h-[67px] absolute -top-16 -left-28'>
        <Image src={QuoteIcon} class='w-full' alt="Left Quote" />
      </div>
      <div class='w-[84px] h-[67px] absolute -bottom-2 -right-32 -scale-100'>
        <Image src={QuoteIcon} class='w-full' alt="Right Quote" />
      </div>
    </Text> -->
    
   


    <Text type={'h2'} class='text-black mt-3 relative max-md:block'>
      <div class="flex sm:flex-row flex-col">
        <span class="text-[#BE2F35]">What Our &nbsp;</span> <span>Parents Say?</span> 
      </div>
      <div class='w-[84px] h-[67px] block max-md:hidden absolute -top-[10px] -left-[140px] text-[128px] font-bold text-white' style={{
        textShadow: '0 0 3px rgba(190, 48, 53, 60%), -6px 4px 2px rgba(190, 48, 53, 0.64)'
      }}>
        “
      </div>
      <div class='w-[84px] h-[67px] block max-md:hidden absolute top-[70px] -right-[150px] text-[128px] font-bold text-white -scale-x-100' style={{
        textShadow: '0 0 3px rgba(190, 48, 53, 60%), 6px 4px 2px rgba(190, 48, 53, 0.64)'
      }}>
        “
      </div>
    </Text>
    <Text type="base" class="mt-1 font-bold text-center">Shaping a Brighter Future for Your Child.</Text>
    <div class="max-md:p-0 p-6" />

    <div class="w-[70%] relative left-[20%] h-[2px] self-start max-md:mt-12" style={{
      background: 'linear-gradient(to left, rgb(3, 55, 112) 0%, rgb(162, 205, 251) 100%)'
    }}></div>

<div class='w-full h-[192px] rounded-2xl bg-white mt-7 border-gray-300 border overflow-hidden flex flex-row max-md:flex-col max-md:px-2 max-md:py-4 max-md:h-auto'>
  <div class='
    min-w-[34vw] max-md:w-[100%]
    max-md:min-h-[136px] bg-cover bg-center
    rounded-lg flex items-center justify-center
    rounded-r-none 
    '
    style={{
      backgroundImage: `url(${testimonialImg1.src})`,
      backgroundPosition : 'top'
    }}>

    <Image data-video-open="testimonial" class='w-10 h-10 hover:scale-110 transition-all bg-white border-white border rounded-full ' src={play} alt="Play Icon"  />

  </div>
  <div class='flex flex-col justify-center px-14 max-md:px-1 max-md:items-left'>
    <Text
      type={'regular'}
      class={'text-black max-md:mt-4 max-md:w-full'}
    >
    ...I'm very happy with the initiatives that TCIS takes to make our children better leaders for tomorrow...
    </Text>
    <div data-video-open="testimonial1">
      <Button class="h-12 mt-6 flex items-center" >
          <span class="flex gap-3 ">
          <Image class=' h-5  w-5 bg-white border-white  border rounded-full ' src={play} alt="Play Icon"  />
          <p class="text-sm">Watch Video</p>
        </span>
       </Button>
    </div>
    <div class="pt-4 max-md:2" />
   <!-- <Text type="sm" class="tracking-[1.8px] text-primary uppercase font-bold">{testimonials[0].author}</Text> -->

  </div>
</div>


    <div class="flex flex-row gap-7 max-sm:flex-col items-stretch max-sm:gap-0 mt-16 max-md:mt-2">
      {testimonials.map(item => {
        return (
          <TestimonicalCard 
              quote={item.quote}
              author={item?.author}
              role={item?.role}
              image={item.image}
              ctaText={item.ctaText}
              ctaLink={item.ctaLink}
              className="bg-transparent"
          />
        )
      })}
    </div>
    <div class="max-md:p-0 p-[40px]" />

    <div class="w-[70%] relative left-[5%] h-[2px] self-start" style={{
      background: 'linear-gradient(to right, rgb(3, 55, 112) 0%, rgb(162, 205, 251) 100%)'
    }}></div>

    <!-- <iframe width="330" height="186" src="https://www.youtube.com/embed/" title="Glentree Student Testimonial | Glentree Academy" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> -->
  
    <!-- <YoutubeEmbed embedId={'d-A17Q46EvI'} videoId='0' /> -->
   
  </Constrain>
  <YoutubeEmbed embedId={'0ggPlpA38MI'} videoId='testimonial' />
  <YoutubeEmbed embedId={'0ggPlpA38MI'} videoId='testimonial1' />
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var lazyVideos = [].slice.call(document.querySelectorAll("video.lazy"));
  
      if ("IntersectionObserver" in window) {
        var lazyVideoObserver = new IntersectionObserver(function(entries, observer) {
          entries.forEach(function(video) {
            if (video.isIntersecting) {
              for (var source in video.target.children) {
                var videoSource = video.target.children[source];
                if (typeof videoSource.tagName === "string" && videoSource.tagName === "SOURCE") {
                  videoSource.src = videoSource.dataset.src;
                }
              }
  
              video.target.load();
              video.target.classList.remove("lazy");
              lazyVideoObserver.unobserve(video.target);
            }
          });
        });
  
        lazyVideos.forEach(function(lazyVideo) {
          lazyVideoObserver.observe(lazyVideo);
        });
      }
  
      var playOnHoverTarget = document.querySelector(".play-on-hover");
      var playOnHoverVideo = document.querySelector(".play-on-hover video");
  
  
  
      if ("IntersectionObserver" in window && window.innerWidth < 999) {
      } else {
        playOnHoverTarget?.addEventListener("mouseover", function() {
          playOnHoverVideo?.play();
        });
        playOnHoverTarget?.addEventListener("mouseout", function() {
          playOnHoverVideo?.pause();
        });
      }
    });
  </script>